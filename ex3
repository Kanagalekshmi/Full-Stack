<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Quiz App</title>
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: #fff;
            width: 100%;
            max-width: 600px;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* New Main Title Style */
        .main-title {
            text-align: center;
            color: #007bff;
            font-size: 26px;
            font-weight: bold;
            margin: 0 0 15px 0;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            display: block;
            margin-bottom: 20px;
            font-size: 18px; /* Slightly smaller since we have a main title now */
        }

        /* Inputs */
        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        /* Button */
        button {
            width: 100%;
            padding: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #0056b3;
        }
       
        button.secondary {
            background-color: #6c757d;
            margin-top: 5px;
        }
        button.secondary:hover {
            background-color: #5a6268;
        }

        #loginMsg {
            text-align: center;
            margin-top: 15px;
            color: red;
            font-weight: bold;
        }

        /* Timer & Progress */
        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .timer {
            color: #d9534f;
        }
       
        .progress {
            color: #555;
        }

        /* Quiz Area */
        .quiz-content {
            min-height: 200px;
        }

        .question-block {
            margin-bottom: 25px;
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        /* Simple Radio Options */
        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
            font-weight: normal;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #eee;
        }

        .options label:hover {
            background: #eef1ff;
            border-color: #ccc;
        }

        /* Result Section */
        #scoreText {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .result-score {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }

        /* Review Section Styling */
        .review-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 15px;
        }

        .review-item {
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }

        .review-q {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .review-opt {
            padding: 5px;
            font-size: 14px;
            border-radius: 4px;
        }

        .review-opt.correct {
            background-color: #d4edda; /* Green */
            color: #155724;
            border: 1px solid #c3e6cb;
            font-weight: bold;
        }

        .review-opt.wrong {
            background-color: #f8d7da; /* Red */
            color: #721c24;
            border: 1px solid #f5c6cb;
            text-decoration: line-through;
        }

        /* Utility */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
   
    <!-- Login Section -->
    <div id="loginSection">
        <div class="main-title">KCET Learning Quiz</div>
        <h2>Student Login</h2>
        <div class="input-group">
            <label>Username</label>
            <input type="text" id="username" placeholder="Enter username">
        </div>
        <div class="input-group">
            <label>Password</label>
            <input type="password" id="password" placeholder="Enter password">
        </div>
        <button id="loginBtn">Start Quiz</button>
        <p id="loginMsg"></p>
    </div>

    <!-- Quiz Section -->
    <div id="quizSection" class="hidden">
        <h2>CS Quiz</h2>
       
        <!-- Timer and Progress -->
        <div class="header-info">
            <div class="timer">Time: <span id="countdown">10:00</span></div>
            <div class="progress" id="progressText">Question 1 / 10</div>
        </div>

        <div class="quiz-content">
           
            <!-- Q1 -->
            <div class="question-block" id="q1">
                <p class="question-text">1. Which data structure uses LIFO?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="a"> Queue</label>
                    <label><input type="radio" name="q1" value="b"> Stack</label>
                    <label><input type="radio" name="q1" value="c"> Linked List</label>
                </div>
            </div>

            <!-- Q2 -->
            <div class="question-block hidden" id="q2">
                <p class="question-text">2. What is the time complexity of binary search?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="a"> O(n)</label>
                    <label><input type="radio" name="q2" value="b"> O(n^2)</label>
                    <label><input type="radio" name="q2" value="c"> O(log n)</label>
                </div>
            </div>

            <!-- Q3 -->
            <div class="question-block hidden" id="q3">
                <p class="question-text">3. Which of the following is NOT a programming language?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="a"> Python</label>
                    <label><input type="radio" name="q3" value="b"> HTML</label>
                    <label><input type="radio" name="q3" value="c"> Java</label>
                </div>
            </div>

            <!-- Q4 -->
            <div class="question-block hidden" id="q4">
                <p class="question-text">4. The brain of the computer is called?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="a"> Monitor</label>
                    <label><input type="radio" name="q4" value="b"> CPU</label>
                    <label><input type="radio" name="q4" value="c"> ALU</label>
                </div>
            </div>

            <!-- Q5 -->
            <div class="question-block hidden" id="q5">
                <p class="question-text">5. Which algorithm finds the shortest path?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="a"> Dijkstra's</label>
                    <label><input type="radio" name="q5" value="b"> Kruskal's</label>
                    <label><input type="radio" name="q5" value="c"> Prim's</label>
                </div>
            </div>

            <!-- Q6 -->
            <div class="question-block hidden" id="q6">
                <p class="question-text">6. 1 Byte is equal to how many bits?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="a"> 4</label>
                    <label><input type="radio" name="q6" value="b"> 8</label>
                    <label><input type="radio" name="q6" value="c"> 16</label>
                </div>
            </div>

            <!-- Q7 -->
            <div class="question-block hidden" id="q7">
                <p class="question-text">7. Which protocol is used for secure communication?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="a"> HTTP</label>
                    <label><input type="radio" name="q7" value="b"> FTP</label>
                    <label><input type="radio" name="q7" value="c"> HTTPS</label>
                </div>
            </div>

            <!-- Q8 -->
            <div class="question-block hidden" id="q8">
                <p class="question-text">8. In a database, a unique identifier is?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="a"> Foreign Key</label>
                    <label><input type="radio" name="q8" value="b"> Primary Key</label>
                    <label><input type="radio" name="q8" value="c"> Secondary Key</label>
                </div>
            </div>

            <!-- Q9 -->
            <div class="question-block hidden" id="q9">
                <p class="question-text">9. Which manages hardware and software?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="a"> App Software</label>
                    <label><input type="radio" name="q9" value="b"> Operating System</label>
                    <label><input type="radio" name="q9" value="c"> Compiler</label>
                </div>
            </div>

            <!-- Q10 -->
            <div class="question-block hidden" id="q10">
                <p class="question-text">10. What does RAM stand for?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="a"> Read Access Memory</label>
                    <label><input type="radio" name="q10" value="b"> Random Access Memory</label>
                    <label><input type="radio" name="q10" value="c"> Run Accept Memory</label>
                </div>
            </div>

        </div>
       
        <!-- Navigation Button -->
        <button id="nextBtn">Next Question</button>
    </div>

    <!-- Result Section -->
    <div id="resultSection" class="hidden">
        <h2>Results</h2>
        <div class="result-score">
            <span id="scoreValue">0/10</span>
        </div>
        <p id="scoreText"></p>
       
        <!-- Review Button -->
        <button id="reviewBtn">Review Answers</button>
        <button id="restartBtn">Take Quiz Again</button>
    </div>

    <!-- Review Section -->
    <div id="reviewSection" class="hidden">
        <h2>Quiz Review</h2>
        <div class="review-list" id="reviewContent">
            <!-- Content injected via JS -->
        </div>
        <button id="backToResultBtn" class="secondary">Back to Results</button>
        <button id="restartFromReviewBtn">Take Quiz Again</button>
    </div>

</div>

<script>
 $(document).ready(function(){

    let timerInterval;
    let currentQuestion = 1; // Starts at 1
    const totalQuestions = 10;

    // Correct answers key (Made accessible for review)
    const answers = {
        q1: "b", // Stack
        q2: "c", // O(log n)
        q3: "b", // HTML
        q4: "b", // CPU
        q5: "a", // Dijkstra
        q6: "b", // 8 bits
        q7: "c", // HTTPS
        q8: "b", // Primary Key
        q9: "b", // OS
        q10: "b" // Random Access Memory
    };

    // Timer Function
    function startTimer(duration, display) {
        let timer = duration, minutes, seconds;
        clearInterval(timerInterval);
        timerInterval = setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.text(minutes + ":" + seconds);

            if (--timer < 0) {
                clearInterval(timerInterval);
                display.text("00:00");
                calculateScore(); // Auto submit when time up
            }
        }, 1000);
    }

    // Update UI to show specific question
    function showQuestion(qNum) {
        $(".question-block").addClass("hidden");
        $("#q" + qNum).removeClass("hidden");
        $("#progressText").text(`Question ${qNum} / ${totalQuestions}`);

        if (qNum === totalQuestions) {
            $("#nextBtn").text("Review & Submit");
        } else {
            $("#nextBtn").text("Next Question");
        }
    }

    // Login Logic
    $("#loginBtn").click(function(){
        let user = $("#username").val().trim();
        let pass = $("#password").val().trim();
        const $msg = $("#loginMsg");

        if(user === "" || pass === ""){
            $msg.text("Please enter both fields");
            return;
        }

        if(user === "Kanaga" && pass === "123456"){
            $("#loginSection").addClass("hidden");
            $("#quizSection").removeClass("hidden");
            $msg.text("");
           
            currentQuestion = 1;
            showQuestion(1);
           
            let tenMinutes = 60 * 10;
            startTimer(tenMinutes, $('#countdown'));
        } else {
            $msg.text("Invalid username or password");
        }
    });

    // Next / Review Button Logic
    $("#nextBtn").click(function(){
        let name = "q" + currentQuestion;
        if($("input[name='"+name+"']:checked").length === 0){
            alert("Please select an answer for Question " + currentQuestion);
            return;
        }

        if(currentQuestion === totalQuestions){
            calculateScore();
        } else {
            currentQuestion++;
            showQuestion(currentQuestion);
        }
    });

    // Calculate Score Function
    function calculateScore() {
        clearInterval(timerInterval);
        let score = 0;
        let answered = 0;

        for(let i=1; i<=totalQuestions; i++){
            let selected = $("input[name='q"+i+"']:checked").val();
            if(selected){
                answered++;
                if(selected === answers['q'+i]){
                    score++;
                }
            }
        }

        let percentage = (score / totalQuestions) * 100;
        let message = "";

        if(percentage === 100) message = "Excellent! Perfect Score!";
        else if(percentage >= 80) message = "Great Job!";
        else if(percentage >= 50) message = "Good effort.";
        else message = "Keep studying!";

        $("#quizSection").addClass("hidden");
        $("#resultSection").removeClass("hidden");
       
        $("#scoreValue").text(score + "/" + totalQuestions);
        $("#scoreText").html(`You scored <strong>${percentage}%</strong><br>${message}`);
    }

    // Show Review Logic
    $("#reviewBtn").click(function(){
        $("#resultSection").addClass("hidden");
        $("#reviewSection").removeClass("hidden");
        generateReview();
    });

    // Back to Result Logic
    $("#backToResultBtn").click(function(){
        $("#reviewSection").addClass("hidden");
        $("#resultSection").removeClass("hidden");
    });

    // Generate Review Content
    function generateReview() {
        let html = "";

        for(let i=1; i<=totalQuestions; i++) {
            let qName = "q" + i;
            // Get the question text from the original HTML
            let qText = $("#" + qName + " .question-text").text();
           
            // Get Correct Answer
            let correctVal = answers[qName];
           
            // Get User Answer
            let userVal = $("input[name='"+qName+"']:checked").val();

            // Loop through options to build the review list
            let optionsHtml = "";
            $("#" + qName + " label").each(function(){
                let $label = $(this);
                let val = $label.find("input").val();
                // Get text content without the input element
                let text = $label.clone().children().remove().end().text();

                let classes = "";
                if(val === correctVal) {
                    classes += " correct"; // Always show correct one in green
                }
                if(val === userVal && val !== correctVal) {
                    classes += " wrong"; // Show wrong user selection in red
                }

                optionsHtml += `<div class="review-opt ${classes}">${text}</div>`;
            });

            html += `
                <div class="review-item">
                    <div class="review-q">${qText}</div>
                    <div>${optionsHtml}</div>
                </div>
            `;
        }
        $("#reviewContent").html(html);
    }

    // Restart Logic (From Result)
    $("#restartBtn").click(function(){
        doRestart();
    });

    // Restart Logic (From Review)
    $("#restartFromReviewBtn").click(function(){
        doRestart();
    });

    function doRestart() {
        clearInterval(timerInterval);
        $("#countdown").text("10:00");

        $("input[type='radio']").prop("checked", false);
        $("#username").val("");
        $("#password").val("");
        $("#loginMsg").text("");

        $("#resultSection").addClass("hidden");
        $("#reviewSection").addClass("hidden");
        $("#loginSection").removeClass("hidden");
    }

});
</script>

</body>
</html>
